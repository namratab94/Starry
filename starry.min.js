/**
 * author:		Andre Sieverding https://github.com/Teddy95
 * license:		MIT http://opensource.org/licenses/MIT
 */

function Starry(t){this.element=t,this.elementName=!1,this.stars=!1,this.placeholder=$(t).clone(),this.initSettings=!1,Starry.prototype.init=function(t){if("function"!=typeof jQuery)return!1;if("undefined"==typeof $(this.element).attr("name"))return!1;var r;if(r=$(this.element).attr("name"),this.elementName=r,"undefined"==typeof t&&(t={}),("undefined"==typeof t.stars||0==t.stars)&&(t.stars=5),"undefined"==typeof t.multiple&&(t.multiple=!1),"undefined"==typeof t.startValue&&(t.startValue=0),"undefined"==typeof t.readOnly&&(t.readOnly=!1),"undefined"==typeof t.tooltips&&(t.tooltips=!1),5==t.stars&&t.tooltips===!0&&(t.tooltips=["Awful","Poor","Average","Good","Excellent"]),"undefined"==typeof t.success&&(t.success=!1),t.multiple===!1){var s;s=document.cookie,s=s.split(";");for(var a=0;a<s.length;a++)cookie=s[a],cookie.trim()=="starry_"+r+"=true"&&(t.readOnly=!0)}if(this.initSettings=t,1==t.readOnly){var e,i,n,l,y,o;e=0,i="",n="";for(var a=0;t.stars>a;a++)e=32*a,i+="<img class='Starry-star' src='"+starryInfo.url+"icons/star_grey.png' alt='' style='left: "+e+"px;' />",n+="<img class='Starry-star' src='"+starryInfo.url+"icons/star_color.png' alt='' style='left: "+e+"px;' />";return l=100/t.stars*t.startValue,y=32*t.stars,o="<div id='Starry_"+r+"' class='Starry-readonly' style='width: "+y+"px;'><div class='Starry-stars'>"+i+"</div><div class='Starry-stars' style='width: "+l+"%;'>"+n+"</div></div>",$(this.element).replaceWith(o),$("#Starry_"+r).attr("data-rate",t.startValue),this.stars=!0,!0}var e,i,n,l,y,d;e=0,i="",n="";for(var a=0;t.stars>a;a++)e=32*a,i+="<img class='Starry-star' src='"+starryInfo.url+"icons/star_grey.png' alt='' style='left: "+e+"px;' />",n+="<img class='Starry-star' src='"+starryInfo.url+"icons/star_color.png' alt='' style='left: "+e+"px;' />";l=100/t.stars*t.startValue,y=32*t.stars,d="<div class='Starry-readonly' style='width: "+y+"px;'><div class='Starry-stars'>"+i+"</div><div id='Starry-stars_"+r+"' class='Starry-stars' style='width: "+l+"%;'>"+n+"</div></div>";var o,c;e=0,o="<div id='Starry_"+r+"' class='Starry' style='width: "+y+"px;'>"+d+"<div id='Starry-inner_"+r+"' class='Starry-inner'>";for(var a=0;t.stars>a;a++)c=t.tooltips!==!1&&$.isFunction($.fn.tipsy)===!0?" Starry-tooltip' title='"+t.tooltips[t.stars-1-a]:"",e=32*a,o+="<div class='Starry-star Starry-star-"+r+c+"' data-level='"+(t.stars-a)+"' style='right: "+e+"px; background-image: url("+starryInfo.url+"icons/star_hover.png);'></div>";return o+="</div></div>",$(this.element).replaceWith(o),$("#Starry_"+r).attr("data-rate",t.startValue),setTimeout(function(){t.tooltips!==!1&&$.isFunction($.fn.tipsy)===!0&&$(".Starry-tooltip").tipsy({gravity:"s"})},0),$(".Starry-star-"+r).off(),$(".Starry-star-"+r).click(function(){level=$(this).attr("data-level");var s;if(t.multiple===!1){var a;a=new Date,a.setTime(a.getTime()+31104e7),document.cookie="starry_"+r+"=true; expires="+a.toGMTString(),s=!0}s===!0?($("#Starry-inner_"+r).remove(),$("#Starry_"+r).replaceWith($("#Starry_"+r).html()),l=100/t.stars*level,$("#Starry-stars_"+r).css("width",l+"%")):(l=100/t.stars*level,$("#Starry-stars_"+r).css("width",l+"%")),$(".tipsy").css("display","none"),t.success!==!1&&t.success(level),$("#Starry_"+r).attr("data-rate",level)}),this.stars=!0,!0},Starry.prototype.destroy=function(){return this.stars===!0?($("#Starry_"+this.elementName).replaceWith(this.placeholder),this.stars=!1,!0):!1},Starry.prototype.rebuild=function(t){this.destroy(),"undefined"==typeof t?this.initSettings===!1?this.init():this.init(this.initSettings):this.init(t)},Starry.prototype.getRating=function(){var t;return t=$("#Starry_"+this.elementName).attr("data-rate")},Starry.prototype.setRating=function(t){this.stars===!0&&(this.destroy(),settings=this.initSettings,settings.startValue=t,this.init(settings))}}var starryPath,starryFilename,starryInfo;starryPath=document.getElementsByTagName("script"),starryPath=starryPath[starryPath.length-1],starryPath=starryPath.src,starryFilename=starryPath.split("/").reverse()[0];var starryInfo={url:starryPath.replace(starryFilename,""),author:"Andre Sieverding"};
